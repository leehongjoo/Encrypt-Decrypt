using SFB;
using System.Collections;
using System.Collections.Generic;
using TMPro;
using System.IO;
using UnityEngine;

public class Encrypt_Decrypt : MonoBehaviour
{
    public TMP_Text EquipmentName;
    public TMP_Text StartTime;
    public TMP_Text EndTime;
    public TMP_Text ChannelNumber;
    public TMP_Text samplingRate;
    public TMP_Text TotalSample;
    public TMP_Text TotalTime;
    public TMP_Text Data;
    public void savePanaxtosTextFile()
    {
        string data = "A 0\r\n1.5564287387415,11.9087807638784,38.5242716970874,65.2842682287594,51.5422896784472,-11.5548140359393,-66.5681529899496,-57.5181030696342,-7.91814485626674,15.793424279732,-4.67130189733097,-29.4656879659846,-26.0747686681828,-5.72802737156139,3.79618518890372,-4.3835336803205,-14.1499991745778,-11.7478991278892,-3.29869239405966,-3.30026345780161,-11.0546380617438,-11.4105556225928,-0.99132214826227,4.14726990965573,-4.00508442152738,-10.2611249313111,-2.68591501696064,6.07712029536946,1.72081859973935,-6.41964878132308,-3.41961340568469,4.02298283061279,0.933974334943777,-7.83412803049752,-6.85369244551887,1.2669183173081,1.22011192168376,-6.44131935915061,-6.37383894573819,3.88271175742984,9.84474825342069,5.14465804621002,0.544359043233712,3.5049788231958,6.69719519464745,3.75979041579301,0.65111703555031,3.00343591991009,5.71097202552893,3.54232259433185,0.991031825740832,3.49846625057276,7.50481103696388,7.10628399900444,4.30536955158958,4.64788679036695,7.21036103338955,7.06890604041183,4.46287482605402,3.76099447098134,5.43357234791262,5.63361558341244,2.91401845013987,0.387784950007749,0.726824828950967,2.51672185291211,3.127997187618,2.61650932852574,2.59213051040803,3.13025986603979,3.10058338997581,2.5800413932113,3.00844985562659,4.94897041330558,7.20128542860013,8.65158313437946,9.49423050759085,9.91477813886319,9.10452761700208,6.4151533513639,2.78326238327617,0.481170577895425,0.804571348203545,2.16646012233153,2.21772842225661,1.29944615917559,1.20567909257092,1.73960769212376,1.65064070516373,1.68709387297171,3.39472550368895,5.60806213254985,5.39617732254349,2.63703517845191,0.461541210844539,0.38570937298337,0.442256523371119,-0.736051112396024,-1.62014930374118,-0.851065890234834,0.532614500692727,1.19408855760016,1.53082018204595,2.12667103249637,1.90368245956888,0.0203229458995028,-1.71998577598018,-1.11803005325099,0.93305805916523,1.98255080190533,1.69007588082687,1.2528416223577,0.461948178903082,-1.77493431533052,-4.44074064010633,-4.96106954570934,-3.16380086314955,-1.65234654777511,-1.63343933452968,-1.62353929876826,-0.768772463711643,-0.175341957004532,-0.474227868598705,-0.688648055508839,-0.186327280215335,-0.109250914489824,-1.71366355295218,-4.18203879655394,-5.67763631821694,-5.80297523794199,-5.26128581298108,-4.27077361720187,-3.17332273346591,-3.2243365699042,-4.92991681815101,-6.56526513617874,-5.91339278811322,-3.14667311429411,-0.598262007253005,0.214333767053461,-0.493406357379091,-2.42877682450245,-5.13324782253998,-6.8323637704021,-6.02565161496763,-3.63101028765307,-1.96012733099966,-2.12018311597167,-3.107911309705,-3.2806459966176,-2.281851967091,-1.11611140671054,-0.70879008587108,-0.996564820878103,-1.21063418318739,-0.704010567212596,0.403416169728843,1.19719252833516,0.607915095182506,-1.46435467698781,-3.66020979234918,-4.68879330668176,-5.00819207426597,-5.59157838403967,-5.97060030410778,-5.17360473398981,-3.42599495807711,-1.68034284010249,-0.486283720636848,0.0435073740507761,-0.289940030684511,-1.77567586730855,-3.93960220464004,-5.19208885471916,-4.12636770546052,-1.05305527884188,1.9956989939307,3.04457157309306,2.19236858344293,1.16039296676499,1.04423097164457,1.74113173280207,2.61808345220121,2.60084142152441,1.0867908823785,-0.925670808826782,-2.08681175031247,-2.34936039264859,-2.27774248254756,-1.95351052151213,-1.35515407508529,-0.970236187459276,-1.45146953031646,-2.71890903121671,-3.75708466153151,-3.50184972763132,-1.70038843664922,0.788040351812048,2.24770556601161,1.57421403930367,-0.245753315323898,-1.06428373073771,0.0936195701723856,2.11141647968411,2.92948971724543,1.64324967537096,-0.564763718967288,-1.789993290595,-1.26788351349984,0.180887380969796,1.0606405050315,0.539104534366587,-1.07563936671827,-2.87901343678823,-3.65624470751858,-2.33156893184085,0.67219779173482,3.32973206959156,3.97005200657213,2.54799776859731,0.151071923042341,-1.95944249746708,-3.06974471835467,-3.01740540826018,-1.7848981192237,0.21881156033829,2.06235230682762,3.12760523385988,3.22843808629242,2.21060553713486,0.578205986215001,-0.306549426806177,0.464793887130091,2.39421384648127,4.01562211916829,4.09261907727728,2.6618389681918,0.984802717122331,0.619862842593871,2.16776515705211,4.22894197609506,4.58916636448051,2.93973313980641,0.898105244326942,-0.175191040266039,0.106318174460812,1.26073629502605,1.94084141708774,1.13869799720933,-0.725403847393075\r\nB 0\r\n3.87077173037628, 28.1734499916214, 86.6260874162881, 138.551777623096, 98.9767084609112, -36.4899701356178, -139.181567935911, -105.187746716623, 0.0529979465195538, 40.8261593573161, -7.31321775387377, -57.6461882680208, -49.8042636277026, -11.6648646387395, 2.97235382418354, -14.5383702044237, -30.3477559004063, -20.6143073963337, -2.29194262623923, -4.18469057725241, -20.4283852125505, -19.7519103629069, 0.159494423619549, 6.02924535572004, -12.3634729907829, -21.3072100303065, -2.3362748337644, 13.7641595947435, 1.73885283323573, -13.6653718308786, -4.16473358931923, 11.1053916071809, 2.80997765501504, -14.0962145100598, -8.87706466801788, 8.64415833940561, 7.8679367178987, -6.42581475041084, -5.10153806457383, 11.3052710607202, 14.958204466906, 1.27221198595026, -4.87048346201408, 5.38938376697192, 11.392461339205, 2.15871317333217, -5.38937426669127, 0.749283844761152, 6.93298338994746, 0.794468368856599, -6.52854564970087, -1.48047357344676, 8.46090233218886, 9.3763236075109, 4.10301544542895, 3.8586101158787, 7.7789243176877, 7.33746199597777, 3.06517597857498, 2.21906700120245, 5.43396726851782, 7.2420939159346, 6.34354043854494, 6.74889033512833, 9.83533966113316, 11.5487528278231, 8.90514980146501, 4.95031255240192, 4.21464940858479, 6.09175956185541, 6.4623360916505, 4.35247491145115, 3.08665973296867, 4.84179079957655, 7.69811882136628, 9.32569106562917, 10.2226807916914, 11.3633897349969, 11.502171653618, 8.91201970602133, 4.49499443876935, 1.68693528449123, 2.37431018317869, 3.83371968202572, 2.74640065084802, 0.922128412823038, 2.12115762421731, 5.08591509497657, 5.76030922048024, 4.45968735242509, 4.55049627510267, 5.65830819438822, 4.55612729717627, 1.91091026906444, 1.60703375343575, 3.47910760813875, 3.47802625416404, 1.1246125856544, -0.0389073543992282, 0.753644115903882, 0.598472466623973, -1.22214650028995, -1.74623747695438, 0.207998888087128, 1.07062420377295, -1.87993095169453, -4.96578698466923, -3.28370275904451, 1.16664116684141, 2.78479550788516, 1.21638550591985, 0.304772691586562, 0.544007713467884, -0.690919636644258, -2.76638881527512, -2.37222243703385, -0.12669666354713, 0.0214010333867937, -1.99849819451746, -2.26663206356142, 0.183172906159788, 2.19186710905983, 1.87282582275907, 0.533977561469748, -0.630984037785992, -2.35525812976202, -4.92046837175842, -6.50368963019873, -6.05419832033638, -5.49978653668632, -6.18807581198347, -6.00636169639247, -3.38963115651016, -1.07921642464967, -2.33246103870121, -5.65641750654456, -6.74935320981769, -4.5751423005069, -1.91048914095396, -0.500737577310382, -0.131829742857245, -1.50171247488008, -4.80461747109789, -7.11947004720022, -5.86537229374706, -2.83284452673853, -1.69010976361337, -3.21986746033323, -5.01183287358465, -5.20015404296414, -4.64834382431639, -4.79214107492789, -5.21312496584007, -4.65830174086191, -3.00317824105654, -1.11629521506101, 0.417737430576269, 1.59209105222745, 2.15120959692954, 1.63656772712739, 0.446147103580296, -0.94995493881684, -3.35679238592662, -6.66970679489524, -7.96808804111671, -5.2492494059836, -0.994421853379682, 1.01904754501828, 0.344624522814398, -0.915424732981975, -1.63405115534924, -2.39867125684157, -3.54941913571348, -4.08487443536488, -2.7758113965536, 0.113525281338047, 2.43485940430919, 2.19416557298556, 0.218333301970603, -0.828375109760021, -0.0209318106955388, 1.4329960111453, 2.27879119138164, 1.68159523564085, -0.297668920284219, -1.77933380966921, -1.15171763297789, 0.392499920762607, 0.679245238516158, -0.588668473326289, -2.43278778107704, -4.19561200277711, -5.34820640735444, -5.154837026412, -3.52784589183003, -1.48872898442886, -0.158194423376475, 0.0939148137856368, -0.566499296196949, -1.46852912076773, -1.70594739684127, -1.25508158717314, -0.79624751609299, -0.519859843976299, -0.595481464563975, -1.74408442601885, -3.92825429387644, -5.79149137951548, -6.10922305168939, -4.81030356822868, -2.6816023984747, -0.867947984943291, -0.442832416103194, -1.60491919496681, -3.02892171131605, -2.96364935306033, -1.26884866493148, 0.746977717134606, 2.07693489233685, 2.36952098242252, 1.65394011877478, 0.584726508218182, -0.0958534846369101, -0.160561866777906, 0.493977089377144, 1.69687754604727, 2.70214332589837, 2.98511367371307, 2.40636326371351, 0.788891869372417, -1.25969073306384, -2.09764530359706, -0.798157576498852, 1.77391613725656, 4.06290523889104, 5.22216067073526, 5.1378112064656, 3.93641582367485, 2.39910787209605, 1.81976547348893, 2.24391345412754, 2.46959843585947, 2.27208838305388, 2.22347122298862, 2.05852479245302, 1.54786246079423, 1.2490396432906, 1.19114610352874, 0.788815921159115, 0.0211682286344281";
        TextData ptd = new TextData("NeuroHarmonyS20_MD",
            "Wed Jul 13 13:39:33 2022 Start Time",
            "Wed Jul 13 13:41:53 2022 End Time",
            "Channel Number: 2",
            "Sample Per Line: 250",
            35000,
            data);
        //string saveFileName = "PanaxtosTextData";
        //string path = "C:/Users/KimKyoungHoon/Desktop/이이사/absc.abcd";
        var extensionList = new[]
        {
            new ExtensionFilter("PanaxtosTextData", "abcd"),
        };
        StandaloneFileBrowser.SaveFilePanelAsync("Save File", "", "", extensionList, (string path) =>
        {
            if (path == "")
                return;
            DirectoryInfo directoryInfo = new DirectoryInfo(Path.GetDirectoryName(path));
            if (!directoryInfo.Exists)
            {
                directoryInfo.Create();
            }
            CryptManager.Save(ptd, path);
        });

    }
    public void openPanaxtosTextFile()
    {
#if UNITY_STANDALONE_WIN
        var bp = new BrowserProperties();
        bp.filter = "abcd files (*.abcd)|*.abcd";
        bp.filterIndex = 0;
        bp.initialDir = @"C:\cmd";
        new fileBrowser().OpenFileBrowser(bp, result =>
        {
            FileInfo fileInfo = new FileInfo(result);
            if (fileInfo.Exists)
            {
                TextData textData = CryptManager.Load(result);
                EquipmentName.text = textData.EquipmentName;
                StartTime.text = textData.StartTime;
                EndTime.text = textData.EndTime;
                ChannelNumber.text = textData.ChannelNumber;
                samplingRate.text = textData.SamplingRate;
                TotalSample.text = textData.TotalSample;
                TotalTime.text = textData.TotalTime.ToString();
                Data.text = textData.Data;
            }

        });
#endif
    }
}
